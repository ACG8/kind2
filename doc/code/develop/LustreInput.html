<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<link rel="stylesheet" href="include/style.css" type="text/css">
<meta content="text/html; charset=iso-8859-1" http-equiv="Content-Type">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="Start" href="index.html">
<link rel="previous" href="LustreTransSys.html">
<link rel="next" href="LustrePath.html">
<link rel="Up" href="index.html">
<link title="Index of types" rel=Appendix href="index_types.html">
<link title="Index of exceptions" rel=Appendix href="index_exceptions.html">
<link title="Index of values" rel=Appendix href="index_values.html">
<link title="Index of modules" rel=Appendix href="index_modules.html">
<link title="Index of module types" rel=Appendix href="index_module_types.html">
<link title="Unroller" rel="Chapter" href="Unroller.html">
<link title="Log" rel="Chapter" href="Log.html">
<link title="Event" rel="Chapter" href="Event.html">
<link title="Strategy" rel="Chapter" href="Strategy.html">
<link title="Analysis" rel="Chapter" href="Analysis.html">
<link title="Flags" rel="Chapter" href="Flags.html">
<link title="InvarManager" rel="Chapter" href="InvarManager.html">
<link title="Kind2" rel="Chapter" href="Kind2.html">
<link title="Kind2Flow" rel="Chapter" href="Kind2Flow.html">
<link title="PostAnalysis" rel="Chapter" href="PostAnalysis.html">
<link title="InputSystem" rel="Chapter" href="InputSystem.html">
<link title="Eval" rel="Chapter" href="Eval.html">
<link title="Ident" rel="Chapter" href="Ident.html">
<link title="Ltree" rel="Chapter" href="Ltree.html">
<link title="Model" rel="Chapter" href="Model.html">
<link title="Scope" rel="Chapter" href="Scope.html">
<link title="Simplify" rel="Chapter" href="Simplify.html">
<link title="StateVar" rel="Chapter" href="StateVar.html">
<link title="Symbol" rel="Chapter" href="Symbol.html">
<link title="TermAttr" rel="Chapter" href="TermAttr.html">
<link title="Term" rel="Chapter" href="Term.html">
<link title="Type" rel="Chapter" href="Type.html">
<link title="UfSymbol" rel="Chapter" href="UfSymbol.html">
<link title="Var" rel="Chapter" href="Var.html">
<link title="Property" rel="Chapter" href="Property.html">
<link title="SubSystem" rel="Chapter" href="SubSystem.html">
<link title="TransSys" rel="Chapter" href="TransSys.html">
<link title="Actlit" rel="Chapter" href="Actlit.html">
<link title="Base" rel="Chapter" href="Base.html">
<link title="Compress" rel="Chapter" href="Compress.html">
<link title="Step" rel="Chapter" href="Step.html">
<link title="Clause" rel="Chapter" href="Clause.html">
<link title="CooperQE" rel="Chapter" href="CooperQE.html">
<link title="Extract" rel="Chapter" href="Extract.html">
<link title="IC3" rel="Chapter" href="IC3.html">
<link title="Poly" rel="Chapter" href="Poly.html">
<link title="Presburger" rel="Chapter" href="Presburger.html">
<link title="QE" rel="Chapter" href="QE.html">
<link title="InvGenMiner" rel="Chapter" href="InvGenMiner.html">
<link title="InvGenDomain" rel="Chapter" href="InvGenDomain.html">
<link title="InvGenGraph" rel="Chapter" href="InvGenGraph.html">
<link title="InvGen" rel="Chapter" href="InvGen.html">
<link title="LockStepDriver" rel="Chapter" href="LockStepDriver.html">
<link title="InputParser" rel="Chapter" href="InputParser.html">
<link title="Interpreter" rel="Chapter" href="Interpreter.html">
<link title="LustreLexer" rel="Chapter" href="LustreLexer.html">
<link title="LustreParser" rel="Chapter" href="LustreParser.html">
<link title="LustreAst" rel="Chapter" href="LustreAst.html">
<link title="LustreIdent" rel="Chapter" href="LustreIdent.html">
<link title="LustreIndex" rel="Chapter" href="LustreIndex.html">
<link title="LustreExpr" rel="Chapter" href="LustreExpr.html">
<link title="LustreNode" rel="Chapter" href="LustreNode.html">
<link title="LustreContext" rel="Chapter" href="LustreContext.html">
<link title="LustreContract" rel="Chapter" href="LustreContract.html">
<link title="LustreDeclarations" rel="Chapter" href="LustreDeclarations.html">
<link title="LustreSimplify" rel="Chapter" href="LustreSimplify.html">
<link title="LustreSlicing" rel="Chapter" href="LustreSlicing.html">
<link title="LustreTransSys" rel="Chapter" href="LustreTransSys.html">
<link title="LustreInput" rel="Chapter" href="LustreInput.html">
<link title="LustrePath" rel="Chapter" href="LustrePath.html">
<link title="NativeInput" rel="Chapter" href="NativeInput.html">
<link title="Pretty" rel="Chapter" href="Pretty.html">
<link title="SMTExpr" rel="Chapter" href="SMTExpr.html">
<link title="SMTLIBSolver" rel="Chapter" href="SMTLIBSolver.html">
<link title="SMTSolver" rel="Chapter" href="SMTSolver.html">
<link title="SolverDriver" rel="Chapter" href="SolverDriver.html">
<link title="SolverResponse" rel="Chapter" href="SolverResponse.html">
<link title="SolverSig" rel="Chapter" href="SolverSig.html">
<link title="CVC4Driver" rel="Chapter" href="CVC4Driver.html">
<link title="GenericSMTLIBDriver" rel="Chapter" href="GenericSMTLIBDriver.html">
<link title="Z3Driver" rel="Chapter" href="Z3Driver.html">
<link title="Yices2SMT2Driver" rel="Chapter" href="Yices2SMT2Driver.html">
<link title="YicesDriver" rel="Chapter" href="YicesDriver.html">
<link title="YicesLexer" rel="Chapter" href="YicesLexer.html">
<link title="YicesNative" rel="Chapter" href="YicesNative.html">
<link title="YicesResponse" rel="Chapter" href="YicesResponse.html">
<link title="Debug" rel="Chapter" href="Debug.html">
<link title="Decimal" rel="Chapter" href="Decimal.html">
<link title="Hashcons" rel="Chapter" href="Hashcons.html">
<link title="HString" rel="Chapter" href="HString.html">
<link title="HStringSExpr" rel="Chapter" href="HStringSExpr.html">
<link title="Kind2Config" rel="Chapter" href="Kind2Config.html">
<link title="Lib" rel="Chapter" href="Lib.html">
<link title="Res" rel="Chapter" href="Res.html">
<link title="Messaging" rel="Chapter" href="Messaging.html">
<link title="Numeral" rel="Chapter" href="Numeral.html">
<link title="SExprBase" rel="Chapter" href="SExprBase.html">
<link title="SExprLexer" rel="Chapter" href="SExprLexer.html">
<link title="Stat" rel="Chapter" href="Stat.html">
<link title="TermLib" rel="Chapter" href="TermLib.html">
<link title="Trie" rel="Chapter" href="Trie.html">
<link title="Version" rel="Chapter" href="Version.html">
<link title="LustreToRust" rel="Chapter" href="LustreToRust.html">
<link title="TestgenDF" rel="Chapter" href="TestgenDF.html">
<link title="TestgenIO" rel="Chapter" href="TestgenIO.html">
<link title="TestgenModes" rel="Chapter" href="TestgenModes.html">
<link title="TestgenSolver" rel="Chapter" href="TestgenSolver.html">
<link title="TestgenStrategies" rel="Chapter" href="TestgenStrategies.html">
<link title="TestgenTree" rel="Chapter" href="TestgenTree.html">
<link title="TestgenLib" rel="Chapter" href="TestgenLib.html">
<link title="Certificate" rel="Chapter" href="Certificate.html"><title>Kind 2 Developer's Documentation : LustreInput</title>
</head>
<body>
<div class="navbar"><a class="pre" href="LustreTransSys.html" title="LustreTransSys">Previous</a>
&nbsp;<a class="up" href="index.html" title="Index">Up</a>
&nbsp;<a class="post" href="LustrePath.html" title="LustrePath">Next</a>
</div>
<h1>Module <a href="type_LustreInput.html">LustreInput</a></h1>

<pre><span class="keyword">module</span> LustreInput: <code class="code"><span class="keyword">sig</span></code> <a href="LustreInput.html">..</a> <code class="code"><span class="keyword">end</span></code></pre><div class="info module top">
Parse Lustre input into the intermediate Lustre format 
<p>

    An OCamllex lexer in <a href="LustreLexer.html"><code class="code"><span class="constructor">LustreLexer</span></code></a> and a Menhir parser in
    <a href="LustreParser.html"><code class="code"><span class="constructor">LustreParser</span></code></a> take the input and produce a sinlge <a href="LustreAst.html#TYPEt"><code class="code"><span class="constructor">LustreAst</span>.t</code></a>
    value, which is a minimally processed representation of a Lustre
    AST.
<p>

    This AST is then translated into a simplified Lustre, see
    <a href="LustreNode.html"><code class="code"><span class="constructor">LustreNode</span></code></a>, and <a href="LustreDeclarations.html"><code class="code"><span class="constructor">LustreDeclarations</span></code></a> for the translation.
<p>

    The main function <a href="LustreInput.html#VALof_file"><code class="code"><span class="constructor">LustreInput</span>.of_file</code></a> of this module returns a system for
    the analysis strategies that can be turned into an internal
    transition system <a href="TransSys.html"><code class="code"><span class="constructor">TransSys</span></code></a> by using functions in
    <a href="LustreTransSys.html"><code class="code"><span class="constructor">LustreTransSys</span></code></a> with relevant parameters.
<p>

    The whole input file is parsed and type checked first, then one
    node is designated as the main node. The returned <code class="code"><span class="constructor">Subsystem</span>.t</code>
    has this main node at the top, and all called nodes as
    children. Nodes that are in the input file, but not called by the
    main node are discarded. No further cone of influence reduction is
    peformed yet, this happens only in <a href="LustreTransSys.html"><code class="code"><span class="constructor">LustreTransSys</span></code></a> when the
    parameters of the analysis are known.
<p>

    The main node is chosen to be, in order of precedence:
<p>
<ul>
<li>the node with the name given by the <code class="code">--lustre_main</code> command-line
      option,</li>
<li>the node with the annotation <code class="code">--%<span class="constructor">MAIN</span></code>, or</li>
<li>the last node in the input.</li>
</ul>

    An exception <code class="code"><span class="constructor">Invalid_argument</span></code> is raised if the node given by
    <code class="code">--lustre_main</code> is not found, there are two nodes with a <code class="code">--%<span class="constructor">MAIN</span></code>
    annotation, or the input contains no nodes.
<p>

    In particular, the output of the entry point <a href="LustreParser.html#VALmain"><code class="code"><span class="constructor">LustreParser</span>.main</code></a>
    returns a Lustre file as a list of declarations of
<p>
<ul>
<li>types <code class="code"><span class="keyword">type</span>&nbsp;t&nbsp;=&nbsp;t'</code>,</li>
<li>global constants <code class="code">const&nbsp;c&nbsp;=&nbsp;v</code>, and</li>
<li>nodes <code class="code">node&nbsp;<span class="constructor">X</span>&nbsp;(...)&nbsp;returns&nbsp;(...);&nbsp;<span class="keyword">let</span>&nbsp;...&nbsp;tel</code>.</li>
</ul>

    A node is viewed as a tuple of an identifier, a list of inputs, a
    list of outputs, declarations of local constants and variables,
    and equations. An equation is either an assignment of an
    expression to a variable, an assertion, a property annotation, or
    flag to mark the node as the top node.
<p>

    The function <code class="code"><span class="constructor">LustreSimplify</span>.declarations_to_nodes</code> is called
    with this list of declarations as input and produces a list of
    <a href="LustreNode.html#TYPEt"><code class="code"><span class="constructor">LustreNode</span>.t</code></a> that contains each node with expressions in a
    normalized form, with structured fields unfolded, constants
    propagated and type aliases substituted.
<p>

    In detail, the process of normalizing an expression in a node
    abstracts every non-variable expression under a <code class="code">pre</code> operator
    into a fresh local variable. All <code class="code"><span class="keywordsign">-&gt;</span></code> operators are lifted to the
    top of the expression so that an expression can be represented as
    a pair of expressions, one for the first instant and one for the
    following. Each variable at the previous state i the left argument
    to the <code class="code"><span class="keywordsign">-&gt;</span></code> operator in the resulting expression is replaced with
    a fresh oracle constant per variable that is added to the inputs
    of the node.
<p>

    Node calls are factored out into assignments to fresh local
    variables, where input expressions are further abstracted to fresh
    local variables. A node call may be wrapped in a condact with an
    activation condition and default values.
<p>

    In detail, <a href="LustreNode.html#TYPEt"><code class="code"><span class="constructor">LustreNode</span>.t</code></a> is a record representing a node with 
<p>
<ul>
<li><code class="code">name</code> an identifier </li>
<li><code class="code">inputs</code> the list of input variables </li>
</ul>

    After finding the designated main node with
    <a href="LustreNode.html#VALfind_main"><code class="code"><span class="constructor">LustreNode</span>.find_main</code></a>, the definitions in the main node and list
    of nodes is reduced to the nodes in the cone of influence of the
    properties of the main node, see
    <code class="code"><span class="constructor">LustreNode</span>.reduce_to_property_coi</code>. Last, the equational
    definitions of each node are ordered by their dependencies with
    <code class="code"><span class="constructor">LustreNode</span>.reduce_to_property_coi</code>.
<p>

    The module <a href="LustreTransSys.html"><code class="code"><span class="constructor">LustreTransSys</span></code></a> turns the list of nodes into a
    transition system <a href="TransSys.html#TYPEt"><code class="code"><span class="constructor">TransSys</span>.t</code></a> by means of the functions
    <a href="LustreTransSys.html#VALtrans_sys_of_nodes"><code class="code"><span class="constructor">LustreTransSys</span>.trans_sys_of_nodes</code></a> and
    <code class="code"><span class="constructor">LustreTransSys</span>.props_of_nodes</code>.<br>
<b>Author(s):</b> Christoph Sticksel<br>
</div>
<hr width="100%">

<pre><span id="VALof_file"><span class="keyword">val</span> of_file</span> : <code class="type">string -> <a href="LustreNode.html#TYPEt">LustreNode.t</a> <a href="SubSystem.html#TYPEt">SubSystem.t</a> * LustreGlobals.t</code></pre><div class="info ">
Parse from the file, return an input system for further slicing
    and refinement from analysis strategies.<br>
</div>

<pre><span id="VALast_of_file"><span class="keyword">val</span> ast_of_file</span> : <code class="type">string -> <a href="LustreAst.html#TYPEdeclaration">LustreAst.declaration</a> list</code></pre><div class="info ">
Parse from the file, returns the AST.<br>
</div>
</body></html>