<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<link rel="stylesheet" href="include/style.css" type="text/css">
<meta content="text/html; charset=iso-8859-1" http-equiv="Content-Type">
<link rel="Start" href="index.html">
<link rel="Up" href="Messaging.html">
<link title="Index of types" rel=Appendix href="index_types.html">
<link title="Index of exceptions" rel=Appendix href="index_exceptions.html">
<link title="Index of values" rel=Appendix href="index_values.html">
<link title="Index of modules" rel=Appendix href="index_modules.html">
<link title="Index of module types" rel=Appendix href="index_module_types.html">
<link title="Log" rel="Chapter" href="Log.html">
<link title="Event" rel="Chapter" href="Event.html">
<link title="Strategy" rel="Chapter" href="Strategy.html">
<link title="Analysis" rel="Chapter" href="Analysis.html">
<link title="Flags" rel="Chapter" href="Flags.html">
<link title="InvarManager" rel="Chapter" href="InvarManager.html">
<link title="Kind2" rel="Chapter" href="Kind2.html">
<link title="InputSystem" rel="Chapter" href="InputSystem.html">
<link title="Eval" rel="Chapter" href="Eval.html">
<link title="Ident" rel="Chapter" href="Ident.html">
<link title="Ltree" rel="Chapter" href="Ltree.html">
<link title="Model" rel="Chapter" href="Model.html">
<link title="Scope" rel="Chapter" href="Scope.html">
<link title="Simplify" rel="Chapter" href="Simplify.html">
<link title="StateVar" rel="Chapter" href="StateVar.html">
<link title="Symbol" rel="Chapter" href="Symbol.html">
<link title="TermAttr" rel="Chapter" href="TermAttr.html">
<link title="Term" rel="Chapter" href="Term.html">
<link title="Type" rel="Chapter" href="Type.html">
<link title="UfSymbol" rel="Chapter" href="UfSymbol.html">
<link title="Var" rel="Chapter" href="Var.html">
<link title="Property" rel="Chapter" href="Property.html">
<link title="SubSystem" rel="Chapter" href="SubSystem.html">
<link title="TransSys" rel="Chapter" href="TransSys.html">
<link title="Actlit" rel="Chapter" href="Actlit.html">
<link title="Base" rel="Chapter" href="Base.html">
<link title="Compress" rel="Chapter" href="Compress.html">
<link title="Step" rel="Chapter" href="Step.html">
<link title="Clause" rel="Chapter" href="Clause.html">
<link title="CooperQE" rel="Chapter" href="CooperQE.html">
<link title="Extract" rel="Chapter" href="Extract.html">
<link title="IC3" rel="Chapter" href="IC3.html">
<link title="Poly" rel="Chapter" href="Poly.html">
<link title="Presburger" rel="Chapter" href="Presburger.html">
<link title="QE" rel="Chapter" href="QE.html">
<link title="InvGenMiner" rel="Chapter" href="InvGenMiner.html">
<link title="InvGenDomain" rel="Chapter" href="InvGenDomain.html">
<link title="InvGenGraph" rel="Chapter" href="InvGenGraph.html">
<link title="InvGen" rel="Chapter" href="InvGen.html">
<link title="LockStepDriver" rel="Chapter" href="LockStepDriver.html">
<link title="InputParser" rel="Chapter" href="InputParser.html">
<link title="Interpreter" rel="Chapter" href="Interpreter.html">
<link title="LustreLexer" rel="Chapter" href="LustreLexer.html">
<link title="LustreParser" rel="Chapter" href="LustreParser.html">
<link title="LustreAst" rel="Chapter" href="LustreAst.html">
<link title="LustreIdent" rel="Chapter" href="LustreIdent.html">
<link title="LustreIndex" rel="Chapter" href="LustreIndex.html">
<link title="LustreExpr" rel="Chapter" href="LustreExpr.html">
<link title="LustreNode" rel="Chapter" href="LustreNode.html">
<link title="LustreContext" rel="Chapter" href="LustreContext.html">
<link title="LustreContract" rel="Chapter" href="LustreContract.html">
<link title="LustreDeclarations" rel="Chapter" href="LustreDeclarations.html">
<link title="LustreSimplify" rel="Chapter" href="LustreSimplify.html">
<link title="LustreSlicing" rel="Chapter" href="LustreSlicing.html">
<link title="LustreTransSys" rel="Chapter" href="LustreTransSys.html">
<link title="LustreInput" rel="Chapter" href="LustreInput.html">
<link title="LustrePath" rel="Chapter" href="LustrePath.html">
<link title="NativeInput" rel="Chapter" href="NativeInput.html">
<link title="Pretty" rel="Chapter" href="Pretty.html">
<link title="SMTExpr" rel="Chapter" href="SMTExpr.html">
<link title="SMTLIBSolver" rel="Chapter" href="SMTLIBSolver.html">
<link title="SMTSolver" rel="Chapter" href="SMTSolver.html">
<link title="SolverDriver" rel="Chapter" href="SolverDriver.html">
<link title="SolverResponse" rel="Chapter" href="SolverResponse.html">
<link title="SolverSig" rel="Chapter" href="SolverSig.html">
<link title="CVC4Driver" rel="Chapter" href="CVC4Driver.html">
<link title="GenericSMTLIBDriver" rel="Chapter" href="GenericSMTLIBDriver.html">
<link title="Z3Driver" rel="Chapter" href="Z3Driver.html">
<link title="Yices2SMT2Driver" rel="Chapter" href="Yices2SMT2Driver.html">
<link title="YicesDriver" rel="Chapter" href="YicesDriver.html">
<link title="YicesLexer" rel="Chapter" href="YicesLexer.html">
<link title="YicesNative" rel="Chapter" href="YicesNative.html">
<link title="YicesResponse" rel="Chapter" href="YicesResponse.html">
<link title="Debug" rel="Chapter" href="Debug.html">
<link title="Decimal" rel="Chapter" href="Decimal.html">
<link title="Hashcons" rel="Chapter" href="Hashcons.html">
<link title="HString" rel="Chapter" href="HString.html">
<link title="HStringSExpr" rel="Chapter" href="HStringSExpr.html">
<link title="Kind2Config" rel="Chapter" href="Kind2Config.html">
<link title="Lib" rel="Chapter" href="Lib.html">
<link title="Messaging" rel="Chapter" href="Messaging.html">
<link title="Numeral" rel="Chapter" href="Numeral.html">
<link title="SExprBase" rel="Chapter" href="SExprBase.html">
<link title="SExprLexer" rel="Chapter" href="SExprLexer.html">
<link title="Stat" rel="Chapter" href="Stat.html">
<link title="TermLib" rel="Chapter" href="TermLib.html">
<link title="Trie" rel="Chapter" href="Trie.html">
<link title="Version" rel="Chapter" href="Version.html">
<link title="LustreToRust" rel="Chapter" href="LustreToRust.html">
<link title="TestgenDF" rel="Chapter" href="TestgenDF.html">
<link title="TestgenIO" rel="Chapter" href="TestgenIO.html">
<link title="TestgenModes" rel="Chapter" href="TestgenModes.html">
<link title="TestgenSolver" rel="Chapter" href="TestgenSolver.html">
<link title="TestgenStrategies" rel="Chapter" href="TestgenStrategies.html">
<link title="TestgenTree" rel="Chapter" href="TestgenTree.html">
<link title="TestgenLib" rel="Chapter" href="TestgenLib.html">
<link title="Certificate" rel="Chapter" href="Certificate.html"><title>Kind 2 Developer's Documentation : Messaging.Make</title>
</head>
<body>
<div class="navbar">&nbsp;<a class="up" href="Messaging.html" title="Messaging">Up</a>
&nbsp;</div>
<h1>Functor <a href="type_Messaging.Make.html">Messaging.Make</a></h1>

<pre><span class="keyword">module</span> Make: <div class="sig_block"><code class="code"><span class="keyword">functor</span> (</code><code class="code"><span class="constructor">T</span></code><code class="code"> : </code><code class="type"><a href="Messaging.RelayMessage.html">RelayMessage</a></code><code class="code">) <span class="keywordsign">-&gt;</span> </code><code class="type"><a href="Messaging.S.html">S</a></code><code class="type">  with type relay_message = T.t</code></div></pre><div class="info module top">
Functor to instantiate the messaging system with a type of messages<br>
</div>
<table border="0" cellpadding="3" width="100%">
<tr>
<td align="left" valign="top" width="1%%"><b>Parameters: </b></td>
<td>
<table class="paramstable">
<tr>
<td align="center" valign="top" width="15%">
<code>T</code></td>
<td align="center" valign="top">:</td>
<td><code class="type"><a href="Messaging.RelayMessage.html">RelayMessage</a></code>
</table>
</td>
</tr>
</table>
<hr width="100%">

<pre><span id="TYPErelay_message"><span class="keyword">type</span> <code class="type"></code>relay_message</span> </pre>


<pre><code><span id="TYPEoutput_message"><span class="keyword">type</span> <code class="type"></code>output_message</span> = </code></pre><table class="typetable">
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span id="TYPEELToutput_message.Log"><span class="constructor">Log</span></span> <span class="keyword">of</span> <code class="type">int * string</code></code></td>
<td class="typefieldcomment" align="left" valign="top" ><code>(*</code></td><td class="typefieldcomment" align="left" valign="top" ><div class="info ">
Log message with level<br>
</div>
</td><td class="typefieldcomment" align="left" valign="bottom" ><code>*)</code></td>
</tr>
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span id="TYPEELToutput_message.Stat"><span class="constructor">Stat</span></span> <span class="keyword">of</span> <code class="type">string</code></code></td>
<td class="typefieldcomment" align="left" valign="top" ><code>(*</code></td><td class="typefieldcomment" align="left" valign="top" ><div class="info ">
Statistics<br>
</div>
</td><td class="typefieldcomment" align="left" valign="bottom" ><code>*)</code></td>
</tr>
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span id="TYPEELToutput_message.Progress"><span class="constructor">Progress</span></span> <span class="keyword">of</span> <code class="type">int</code></code></td>
<td class="typefieldcomment" align="left" valign="top" ><code>(*</code></td><td class="typefieldcomment" align="left" valign="top" ><div class="info ">
Progress<br>
</div>
</td><td class="typefieldcomment" align="left" valign="bottom" ><code>*)</code></td>
</tr></table>

<div class="info ">
A message to be output to the user<br>
</div>


<pre><code><span id="TYPEcontrol_message"><span class="keyword">type</span> <code class="type"></code>control_message</span> = </code></pre><table class="typetable">
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTcontrol_message.Ready"><span class="constructor">Ready</span></span></code></td>
<td class="typefieldcomment" align="left" valign="top" ><code>(*</code></td><td class="typefieldcomment" align="left" valign="top" ><div class="info ">
Process is ready<br>
</div>
</td><td class="typefieldcomment" align="left" valign="bottom" ><code>*)</code></td>
</tr>
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTcontrol_message.Ping"><span class="constructor">Ping</span></span></code></td>
<td class="typefieldcomment" align="left" valign="top" ><code>(*</code></td><td class="typefieldcomment" align="left" valign="top" ><div class="info ">
Request reply from process<br>
</div>
</td><td class="typefieldcomment" align="left" valign="bottom" ><code>*)</code></td>
</tr>
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTcontrol_message.Terminate"><span class="constructor">Terminate</span></span></code></td>
<td class="typefieldcomment" align="left" valign="top" ><code>(*</code></td><td class="typefieldcomment" align="left" valign="top" ><div class="info ">
Request termination of process<br>
</div>
</td><td class="typefieldcomment" align="left" valign="bottom" ><code>*)</code></td>
</tr>
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTcontrol_message.Resend"><span class="constructor">Resend</span></span> <span class="keyword">of</span> <code class="type">int</code></code></td>
<td class="typefieldcomment" align="left" valign="top" ><code>(*</code></td><td class="typefieldcomment" align="left" valign="top" ><div class="info ">
Request resending of relay message<br>
</div>
</td><td class="typefieldcomment" align="left" valign="bottom" ><code>*)</code></td>
</tr></table>

<div class="info ">
A message internal to the messaging system<br>
</div>


<pre><code><span id="TYPEmessage"><span class="keyword">type</span> <code class="type"></code>message</span> = </code></pre><table class="typetable">
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTmessage.OutputMessage"><span class="constructor">OutputMessage</span></span> <span class="keyword">of</span> <code class="type"><a href="Messaging.S.html#TYPEoutput_message">output_message</a></code></code></td>
<td class="typefieldcomment" align="left" valign="top" ><code>(*</code></td><td class="typefieldcomment" align="left" valign="top" ><div class="info ">
Output to user<br>
</div>
</td><td class="typefieldcomment" align="left" valign="bottom" ><code>*)</code></td>
</tr>
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTmessage.ControlMessage"><span class="constructor">ControlMessage</span></span> <span class="keyword">of</span> <code class="type"><a href="Messaging.S.html#TYPEcontrol_message">control_message</a></code></code></td>
<td class="typefieldcomment" align="left" valign="top" ><code>(*</code></td><td class="typefieldcomment" align="left" valign="top" ><div class="info ">
Message internal to the
                                              messaging system<br>
</div>
</td><td class="typefieldcomment" align="left" valign="bottom" ><code>*)</code></td>
</tr>
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTmessage.RelayMessage"><span class="constructor">RelayMessage</span></span> <span class="keyword">of</span> <code class="type">int * <a href="Messaging.S.html#TYPErelay_message">relay_message</a></code></code></td>
<td class="typefieldcomment" align="left" valign="top" ><code>(*</code></td><td class="typefieldcomment" align="left" valign="top" ><div class="info ">
Message to be broadcast
                                              to worker processes<br>
</div>
</td><td class="typefieldcomment" align="left" valign="bottom" ><code>*)</code></td>
</tr></table>

<div class="info ">
A message<br>
</div>


<pre><span id="TYPEctx"><span class="keyword">type</span> <code class="type"></code>ctx</span> </pre>
<div class="info ">
Messaging context<br>
</div>


<pre><span id="TYPEsocket"><span class="keyword">type</span> <code class="type"></code>socket</span> </pre>
<div class="info ">
Socket<br>
</div>


<pre><span id="TYPEthread"><span class="keyword">type</span> <code class="type"></code>thread</span> </pre>
<div class="info ">
Thread<br>
</div>


<pre><span id="VALinit_im"><span class="keyword">val</span> init_im</span> : <code class="type">unit -><br>       (<a href="Messaging.S.html#TYPEctx">ctx</a> * <a href="Messaging.S.html#TYPEsocket">socket</a> * <a href="Messaging.S.html#TYPEsocket">socket</a>) *<br>       (string * string)</code></pre><div class="info ">
Create a messaging context and bind ports for the invariant
      manager. Return a pair of pub socket and pull socket and pair of
      addresses of pub and pull sockets for workers to connect to. 
<p>

      Call this function before forking the processes, the first
      return argument must only be used by the parent process, the
      child processes must use the socket addresses in the second
      return argument.<br>
</div>

<pre><span id="VALinit_worker"><span class="keyword">val</span> init_worker</span> : <code class="type"><a href="Lib.html#TYPEkind_module">Lib.kind_module</a> -><br>       string -> string -> <a href="Messaging.S.html#TYPEctx">ctx</a> * <a href="Messaging.S.html#TYPEsocket">socket</a> * <a href="Messaging.S.html#TYPEsocket">socket</a></code></pre><div class="info ">
Create a messaging context and bind given ports for a worker
      process. Return a messaging context and a pair of sub and push
      sockets.<br>
</div>

<pre><span id="VALrun_im"><span class="keyword">val</span> run_im</span> : <code class="type"><a href="Messaging.S.html#TYPEctx">ctx</a> * <a href="Messaging.S.html#TYPEsocket">socket</a> * <a href="Messaging.S.html#TYPEsocket">socket</a> -><br>       (int * <a href="Lib.html#TYPEkind_module">Lib.kind_module</a>) list -> (exn -> unit) -> unit</code></pre><div class="info ">
Start the background thread for the invariant manager, using the
      given context and sockets. The second parameter is a list of
      PIDs and the kind of worker processes to watch, the third
      argument is the function to call to handle exceptions.<br>
</div>

<pre><span id="VALrun_worker"><span class="keyword">val</span> run_worker</span> : <code class="type"><a href="Messaging.S.html#TYPEctx">ctx</a> * <a href="Messaging.S.html#TYPEsocket">socket</a> * <a href="Messaging.S.html#TYPEsocket">socket</a> -><br>       <a href="Lib.html#TYPEkind_module">Lib.kind_module</a> -> (exn -> unit) -> <a href="Messaging.S.html#TYPEthread">thread</a></code></pre><div class="info ">
Start the background thread for a worker process, using the
      given context and sockets. The second parameter is type of
      worker process, the third is the function to call to handle
      exceptions.<br>
</div>

<pre><span id="VALsend_relay_message"><span class="keyword">val</span> send_relay_message</span> : <code class="type"><a href="Messaging.S.html#TYPErelay_message">relay_message</a> -> unit</code></pre><div class="info ">
Broadcast a message to the worker processes<br>
</div>

<pre><span id="VALsend_output_message"><span class="keyword">val</span> send_output_message</span> : <code class="type"><a href="Messaging.S.html#TYPEoutput_message">output_message</a> -> unit</code></pre><div class="info ">
Send a message to the invariant manager for output to the user<br>
</div>

<pre><span id="VALsend_term_message"><span class="keyword">val</span> send_term_message</span> : <code class="type">unit -> unit</code></pre><div class="info ">
Send a termination message to the invariant manager<br>
</div>

<pre><span id="VALrecv"><span class="keyword">val</span> recv</span> : <code class="type">unit -> (<a href="Lib.html#TYPEkind_module">Lib.kind_module</a> * <a href="Messaging.S.html#TYPEmessage">message</a>) list</code></pre><div class="info ">
Receive messages queued by the background thread<br>
</div>

<pre><span id="VALupdate_child_processes_list"><span class="keyword">val</span> update_child_processes_list</span> : <code class="type">(int * <a href="Lib.html#TYPEkind_module">Lib.kind_module</a>) list -> unit</code></pre><div class="info ">
Notifies the background thread of a new list of child
      processes. Used by the supervisor in a modular analysis when
      restarting.<br>
</div>

<pre><span id="VALcheck_termination"><span class="keyword">val</span> check_termination</span> : <code class="type">unit -> bool</code></pre><div class="info ">
Returns true if a termination message was received. Does NOT
      modify received message in any way.<br>
</div>

<pre><span id="VALexit"><span class="keyword">val</span> exit</span> : <code class="type"><a href="Messaging.S.html#TYPEthread">thread</a> -> unit</code></pre><div class="info ">
Request the background thread of a worker process to terminate<br>
</div>
</body></html>