<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<link rel="stylesheet" href="include/style.css" type="text/css">
<meta content="text/html; charset=iso-8859-1" http-equiv="Content-Type">
<link rel="Start" href="index.html">
<link rel="previous" href="Interpreter.html">
<link rel="next" href="LustreParser.html">
<link rel="Up" href="index.html">
<link title="Index of types" rel=Appendix href="index_types.html">
<link title="Index of exceptions" rel=Appendix href="index_exceptions.html">
<link title="Index of values" rel=Appendix href="index_values.html">
<link title="Index of modules" rel=Appendix href="index_modules.html">
<link title="Index of module types" rel=Appendix href="index_module_types.html">
<link title="Log" rel="Chapter" href="Log.html">
<link title="Event" rel="Chapter" href="Event.html">
<link title="Strategy" rel="Chapter" href="Strategy.html">
<link title="Analysis" rel="Chapter" href="Analysis.html">
<link title="Flags" rel="Chapter" href="Flags.html">
<link title="InvarManager" rel="Chapter" href="InvarManager.html">
<link title="Kind2" rel="Chapter" href="Kind2.html">
<link title="InputSystem" rel="Chapter" href="InputSystem.html">
<link title="Eval" rel="Chapter" href="Eval.html">
<link title="Ident" rel="Chapter" href="Ident.html">
<link title="Ltree" rel="Chapter" href="Ltree.html">
<link title="Model" rel="Chapter" href="Model.html">
<link title="Scope" rel="Chapter" href="Scope.html">
<link title="Simplify" rel="Chapter" href="Simplify.html">
<link title="StateVar" rel="Chapter" href="StateVar.html">
<link title="Symbol" rel="Chapter" href="Symbol.html">
<link title="TermAttr" rel="Chapter" href="TermAttr.html">
<link title="Term" rel="Chapter" href="Term.html">
<link title="Type" rel="Chapter" href="Type.html">
<link title="UfSymbol" rel="Chapter" href="UfSymbol.html">
<link title="Var" rel="Chapter" href="Var.html">
<link title="Property" rel="Chapter" href="Property.html">
<link title="SubSystem" rel="Chapter" href="SubSystem.html">
<link title="TransSys" rel="Chapter" href="TransSys.html">
<link title="Actlit" rel="Chapter" href="Actlit.html">
<link title="Base" rel="Chapter" href="Base.html">
<link title="Compress" rel="Chapter" href="Compress.html">
<link title="Step" rel="Chapter" href="Step.html">
<link title="Clause" rel="Chapter" href="Clause.html">
<link title="CooperQE" rel="Chapter" href="CooperQE.html">
<link title="Extract" rel="Chapter" href="Extract.html">
<link title="IC3" rel="Chapter" href="IC3.html">
<link title="Poly" rel="Chapter" href="Poly.html">
<link title="Presburger" rel="Chapter" href="Presburger.html">
<link title="QE" rel="Chapter" href="QE.html">
<link title="InvGenMiner" rel="Chapter" href="InvGenMiner.html">
<link title="InvGenDomain" rel="Chapter" href="InvGenDomain.html">
<link title="InvGenGraph" rel="Chapter" href="InvGenGraph.html">
<link title="InvGen" rel="Chapter" href="InvGen.html">
<link title="LockStepDriver" rel="Chapter" href="LockStepDriver.html">
<link title="InputParser" rel="Chapter" href="InputParser.html">
<link title="Interpreter" rel="Chapter" href="Interpreter.html">
<link title="LustreLexer" rel="Chapter" href="LustreLexer.html">
<link title="LustreParser" rel="Chapter" href="LustreParser.html">
<link title="LustreAst" rel="Chapter" href="LustreAst.html">
<link title="LustreIdent" rel="Chapter" href="LustreIdent.html">
<link title="LustreIndex" rel="Chapter" href="LustreIndex.html">
<link title="LustreExpr" rel="Chapter" href="LustreExpr.html">
<link title="LustreNode" rel="Chapter" href="LustreNode.html">
<link title="LustreContext" rel="Chapter" href="LustreContext.html">
<link title="LustreDeclarations" rel="Chapter" href="LustreDeclarations.html">
<link title="LustreSimplify" rel="Chapter" href="LustreSimplify.html">
<link title="LustreSlicing" rel="Chapter" href="LustreSlicing.html">
<link title="LustreTransSys" rel="Chapter" href="LustreTransSys.html">
<link title="LustreInput" rel="Chapter" href="LustreInput.html">
<link title="LustrePath" rel="Chapter" href="LustrePath.html">
<link title="NativeInput" rel="Chapter" href="NativeInput.html">
<link title="Pretty" rel="Chapter" href="Pretty.html">
<link title="SMTExpr" rel="Chapter" href="SMTExpr.html">
<link title="SMTLIBSolver" rel="Chapter" href="SMTLIBSolver.html">
<link title="SMTSolver" rel="Chapter" href="SMTSolver.html">
<link title="SolverDriver" rel="Chapter" href="SolverDriver.html">
<link title="SolverResponse" rel="Chapter" href="SolverResponse.html">
<link title="SolverSig" rel="Chapter" href="SolverSig.html">
<link title="CVC4Driver" rel="Chapter" href="CVC4Driver.html">
<link title="GenericSMTLIBDriver" rel="Chapter" href="GenericSMTLIBDriver.html">
<link title="Z3Driver" rel="Chapter" href="Z3Driver.html">
<link title="Yices2SMT2Driver" rel="Chapter" href="Yices2SMT2Driver.html">
<link title="YicesDriver" rel="Chapter" href="YicesDriver.html">
<link title="YicesLexer" rel="Chapter" href="YicesLexer.html">
<link title="YicesNative" rel="Chapter" href="YicesNative.html">
<link title="YicesResponse" rel="Chapter" href="YicesResponse.html">
<link title="Debug" rel="Chapter" href="Debug.html">
<link title="Decimal" rel="Chapter" href="Decimal.html">
<link title="Hashcons" rel="Chapter" href="Hashcons.html">
<link title="HString" rel="Chapter" href="HString.html">
<link title="HStringSExpr" rel="Chapter" href="HStringSExpr.html">
<link title="Kind2Config" rel="Chapter" href="Kind2Config.html">
<link title="Lib" rel="Chapter" href="Lib.html">
<link title="Messaging" rel="Chapter" href="Messaging.html">
<link title="Numeral" rel="Chapter" href="Numeral.html">
<link title="SExprBase" rel="Chapter" href="SExprBase.html">
<link title="SExprLexer" rel="Chapter" href="SExprLexer.html">
<link title="Stat" rel="Chapter" href="Stat.html">
<link title="TermLib" rel="Chapter" href="TermLib.html">
<link title="Trie" rel="Chapter" href="Trie.html">
<link title="Version" rel="Chapter" href="Version.html">
<link title="LustreToRust" rel="Chapter" href="LustreToRust.html">
<link title="TestgenDF" rel="Chapter" href="TestgenDF.html">
<link title="TestgenIO" rel="Chapter" href="TestgenIO.html">
<link title="TestgenModes" rel="Chapter" href="TestgenModes.html">
<link title="TestgenSolver" rel="Chapter" href="TestgenSolver.html">
<link title="TestgenStrategies" rel="Chapter" href="TestgenStrategies.html">
<link title="TestgenTree" rel="Chapter" href="TestgenTree.html">
<link title="TestgenLib" rel="Chapter" href="TestgenLib.html"><title>Kind 2 Developer's Documentation : LustreLexer</title>
</head>
<body>
<div class="navbar"><a class="pre" href="Interpreter.html" title="Interpreter">Previous</a>
&nbsp;<a class="up" href="index.html" title="Index">Up</a>
&nbsp;<a class="post" href="LustreParser.html" title="LustreParser">Next</a>
</div>
<h1>Module <a href="type_LustreLexer.html">LustreLexer</a></h1>

<pre><span class="keyword">module</span> LustreLexer: <code class="code"><span class="keyword">sig</span></code> <a href="LustreLexer.html">..</a> <code class="code"><span class="keyword">end</span></code></pre><div class="info module top">
Lexer for Lustre input 
<p>

    This lexer supports nested include files by maintaining a stack of
    lexing buffers, with the one for the currently processed file at
    the top. If an <code class="code"><span class="keyword">include</span></code> directive is encountered, open the
    referenced file, create a new lexing buffer and push it to the
    stack. Catch end of file exceptions, pop the now empty buffer of
    the stack, and continue with the buffer below.
<p>

    Call <a href="LustreLexer.html#VALlexbuf_init"><code class="code"><span class="constructor">LustreLexer</span>.lexbuf_init</code></a> with the first channel to parse, and the
    directory to search for include files. Then create the lexing
    buffer with <code class="code"><span class="constructor">Lexing</span>.from_function
    <span class="constructor">LustreLexer</span>.read_from_lexbuf_stack</code>.
<p>

    <h1 id="1_Lexicalconventions">Lexical conventions</h1> 
<p>

    The character sequence <code class="code"><span class="keyword">include</span> <span class="string">"FILE"</span></code>, where <code class="code"><span class="constructor">FILE</span></code> is a
    relative or absolute path, is replaced with the contents of
    <code class="code"><span class="constructor">FILE</span></code>. The <code class="code"><span class="keyword">include</span></code> directive may appear at any position in the
    input. Recursive includes are allowed. Positions are labeled by
    line, column and file name.
<p>

    The token <code class="code">--</code> is a comment, everything following the token until
    the end of the line is discarded, unless the comment is a special
    comment, see below. Multi-line comments can be enclosed in <code class="code">/*</code>
    and <code class="code">*/</code>, or <code class="code">(*</code> and <code class="code">*)</code>.
<p>

    The following special comments are parsed:
<p>
<ul>
<li><code class="code">--%<span class="constructor">MAIN</span></code> marks the node containing the annotation as the top
      node. Only one annotation is allowed in the whole input. The
      rest of the line is ignored, in particular it does not matter
      whether the comment is terminated by a <code class="code">;</code> or not.</li>
</ul>
<ul>
<li><code class="code">--%<span class="constructor">PROPERTY</span></code> or <code class="code">--@property</code> must be followed by a Lustre
      expression and a <code class="code">;</code>, it marks a proof obligation for the node
      that contains the comment.</li>
</ul>
<ul>
<li><code class="code">--@var</code>, <code class="code">--@const</code>, <code class="code">--@import</code>, <code class="code">--@import_mode</code>,
      <code class="code">--@contract</code>, <code class="code">--@require</code> and <code class="code">--@ensure</code> are annotations for
      contracts</li>
</ul>
<ul>
<li><code class="code">--!&lt;key&gt; : &lt;value&gt;;</code> are the following aliases </li>
</ul>
<ul>
<li><code class="code">--!main : <span class="keyword">true</span>;</code> is <code class="code">--%<span class="constructor">MAIN</span></code></li>
<li><code class="code">--!property : <span class="constructor">EXPR</span>;</code> is <code class="code">--%<span class="constructor">PROPERTY</span> <span class="constructor">EXPR</span>;</code></li>
<li><code class="code">--!var : <span class="constructor">DEF</span>;</code> is <code class="code">--@var <span class="constructor">DEF</span></code></li>
<li><code class="code">--!const : <span class="constructor">DEF</span>;</code> is <code class="code">--@const <span class="constructor">DEF</span>;</code></li>
<li><code class="code">--!import : <span class="constructor">ID</span>;</code> is <code class="code">--@import <span class="constructor">ID</span>;</code></li>
<li><code class="code">--!import_mode : <span class="constructor">ID</span>;</code> is <code class="code">--@import-mode <span class="constructor">ID</span></code></li>
<li><code class="code">--!contract : <span class="constructor">ID</span>;</code> is <code class="code">--@contract <span class="constructor">ID</span></code></li>
<li><code class="code">--!require : <span class="constructor">EXPR</span>;</code> is <code class="code">--@require <span class="constructor">EXPR</span>;</code></li>
<li><code class="code">--!ensure : <span class="constructor">EXPR</span>;</code> is <code class="code">--@ensure <span class="constructor">EXPR</span>;</code></li>
</ul>

    Unrecognized <code class="code">--%</code> and <code class="code">--@</code> comments result in a failure, but any
    <code class="code">--!</code> comments are accepted with a warning.<br>
<b>Author(s):</b> Christoph Sticksel<br>
</div>
<hr width="100%">

<pre><span id="VALlexbuf_init"><span class="keyword">val</span> lexbuf_init</span> : <code class="type">Pervasives.in_channel -> string -> unit</code></pre><div class="info ">
Initialize the lexing function<br>
</div>

<pre><span id="VALread_from_lexbuf_stack"><span class="keyword">val</span> read_from_lexbuf_stack</span> : <code class="type">bytes -> int -> int</code></pre><div class="info ">
Create a lexer reading from a stack of nested include files<br>
</div>

<pre><span id="VALtoken"><span class="keyword">val</span> token</span> : <code class="type">Lexing.lexbuf -> <a href="LustreParser.html#TYPEtoken">LustreParser.token</a></code></pre><div class="info ">
Entry point for the lexer<br>
</div>
</body></html>